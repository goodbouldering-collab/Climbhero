# ClimbHero - クライミング動画共有プラットフォーム

## 📋 プロジェクト概要

**ClimbHero**は、クライミングコミュニティのための本格的な動画共有プラットフォームです。参考サイト（https://climbhero.info）のデザインを模倣しつつ、充実した機能を提供します。

### 主な特徴

- **横カルーセルUI**: 全セクションで滑らかなスクロール体験
- **拡張ランキング**: デイリー・週間・月間・年間の4期間対応
- **充実のサンプルデータ**: 15本以上の動画と5本のブログ記事
- **プレミアムプラン**: $20/月 + 15日間無料トライアル
- **完全なフッター**: 会社情報、リンク、連絡先を網羅
- **動画投稿機能**: URLを入力するだけで簡単投稿

## 🌐 公開URL

- **開発環境**: https://3000-iekbypsjbezyid8wqeonx-2e77fc33.sandbox.novita.ai
- **GitHub**: https://github.com/username/webapp (要設定)

## ✨ 完成済み機能

### フロントエンド機能
- ✅ **横カルーセルUI** - ランキング、動画、ブログの全セクションに実装
- ✅ **4期間ランキング** - デイリー、週間、月間、年間の切り替え
- ✅ **インタラクティブUI** ✨ NEW
  - ホバーアニメーション（サムネイル拡大、シマーエフェクト）
  - エントランスアニメーション（バウンスイン）
  - スクロール進捗インジケーター
  - トップ3ランキングのパルスグロー効果
  - ツールチップ表示
- ✅ **統一タブデザイン** - 動画フィルター/ランキング期間切り替えの一貫性
- ✅ **コンパクトカード** - サムネイル220px、情報密度最適化
- ✅ **レスポンシブデザイン** - PC/タブレット/モバイル対応
- ✅ **ヒーローセクション** - グラデーション背景 + CTA
- ✅ **動画詳細モーダル** - YouTubeプレイヤー統合
- ✅ **いいね・お気に入り機能**
- ✅ **ユーザー認証** - ログイン/登録
- ✅ **動画投稿フォーム** - モーダル形式
- ✅ **ブログ記事詳細ページ**
- ✅ **完全なフッター** - 4カラムレイアウト

### プレミアムプラン機能
- ✅ **15日間無料トライアル** - クレジットカード入力あり
- ✅ **$20/月プラン** - 明確な料金表示
- ✅ **プランモーダル** - 登録フォーム統合
- ✅ **特典リスト** - 無料 vs プレミアムの比較表示

### Admin管理機能
- ✅ **管理者ダッシュボード** - `#admin`でアクセス
- ✅ **ブログ管理** - 投稿・編集・削除
- ✅ **権限ベースのアクセス制御**

### バックエンドAPI
- ✅ `/api/auth/*` - 認証エンドポイント
- ✅ `/api/videos` - 動画CRUD操作
- ✅ `/api/videos/:id/like` - いいね機能
- ✅ `/api/videos/:id/favorite` - お気に入り機能
- ✅ `/api/rankings/:type` - ランキング（daily, weekly, monthly, yearly, total）
- ✅ `/api/blog` - ブログ記事CRUD操作
- ✅ Admin権限チェック機能

## 🗄️ データアーキテクチャ

### ストレージサービス
- **Cloudflare D1 Database** (SQLite): メインデータストア

### データベーステーブル

**Users テーブル**
- id, email, username, password_hash
- is_admin (管理者権限)
- membership_type (free/premium)
- session_token, created_at

**Videos テーブル**
- id, title, description, url, thumbnail_url
- duration, channel_name, category
- views, likes, created_at

**Video Rankings テーブル**
- video_id
- daily_score, weekly_score, monthly_score, yearly_score, total_score
- last_updated

**Blog Posts テーブル**
- id, title, content, image_url, published_date

**その他**: likes, favorites, comments テーブル

## 📊 サンプルデータ

### 動画: 15本
1. 小川山 - V15ボルダリング完登 (12,500視聴, 890いいね)
2. IFSC World Cup 2025 決勝 (28,920視聴, 1,342いいね)
3. ボルダリング初心者講座 (13,450視聴, 756いいね)
4. 日本選手権2025 女子決勝 (15,670視聴, 834いいね)
5. 御岳エリア - V13課題初登 (9,340視聴, 498いいね)
6. 東京最新ジム紹介 (8,120視聴, 387いいね)
7. 瑞牆山「十一面観音」挑戦 (11,200視聴, 623いいね)
8. リードクライミング講座 (7,890視聴, 412いいね)
9. 世界最強クライマーVS V16 (45,000視聴, 2,340いいね)
10. オリンピック金メダリスト練習風景 (32,000視聴, 1,890いいね)
11. ボルダリングジム開設マニュアル (5,430視聴, 276いいね)
12. 城ヶ崎海岸シーサイドクライミング (6,780視聴, 345いいね)
13. アジアユース選手権2025 (4,230視聴, 189いいね)
14. トレーニング完全ガイド (9,870視聴, 567いいね)
15. グッぼるジム完全ガイド (3,290視聴, 198いいね)

### ブログ: 5本
- 新規パートナージム10社加入（全国200箇所以上）
- 第1回動画コンテスト開催（賞金総額100万円）
- 安全な撮影ガイドライン公開
- プレミアム会員限定AIグレード判定
- 投稿動画数10,000本突破

## 🎨 UIデザイン特徴

### 横カルーセル
- スムーズなスクロール
- 左右ナビゲーションボタン
- スワイプ対応（モバイル）
- **スクロール進捗インジケーター** - カルーセル下部にプログレスバー表示
- カード幅: 220px (PC), 200px (モバイル) - コンパクト設計

### カラースキーム
- メインカラー: Purple (#667eea → #764ba2)
- アクセント: Yellow (ランキング), Red (いいね)
- 背景: Gray-50 / White

### レイアウトパターン
- ヒーローセクション（フル幅グラデーション）
- 横カルーセルセクション（ランキング、動画、ブログ）
- 料金プラン（2カラムカード）
- フッター（4カラム）

### インタラクティブ要素 ✨ NEW
- **ランキングカード**: 最新動画と同じカード形式で統一感向上
- **ホバーアニメーション**: 
  - カード上にマウスを乗せるとサムネイル拡大
  - シマーエフェクト（光の流れ）
  - ランキングスコアのオーバーレイ表示
- **トップ3特別効果**: 
  - 1位のカードにパルスグローアニメーション
  - メダルバッジの立体的なグラデーション
  - シャドウ効果でランク強調
- **エントランスアニメーション**: 
  - カードが順次バウンスインで登場
  - タブ切り替え時のフェードアニメーション
- **ツールチップ**: 
  - 統計バッジにホバーで説明表示
  - カテゴリーバッジにホバー効果
- **ランキング変動表示**: 
  - 1位: 👑 王冠マーク
  - 2-3位: 🔥 急上昇マーク
  - 4-10位: 📈 順位変動数
  - 11位以降: ⭐ NEWマーク
- **タブボタン統一**: 
  - 動画カテゴリーとランキング期間の切り替えボタンを統一デザイン
  - アクティブ状態の視覚的フィードバック強化

## 💰 料金プラン

### 無料プラン ($0/月)
- 動画閲覧無制限
- ランキング閲覧
- ブログ閲覧
- 動画投稿（月5本まで）
- いいね・お気に入り（制限あり）

### プレミアムプラン ($20/月)
- **15日間無料トライアル**
- 動画閲覧無制限
- ランキング閲覧
- ブログ閲覧
- **動画投稿無制限**
- **いいね・お気に入り無制限**
- **広告非表示**
- **AIグレード判定機能**
- **優先サポート**

## 🔐 管理者アクセス

### デフォルト管理者アカウント
- **Email**: `admin@climbhero.com`
- **Password**: `admin123`
- **アクセス**: ログイン後、ヘッダーの「Admin」ボタンから

### 管理者機能
1. **ブログ管理** - 投稿作成、編集、削除
2. **動画管理** - （開発中）
3. **ユーザー管理** - （開発中）
4. **サイト設定** - （開発中）

## 📡 APIエンドポイント

### 認証API
- `POST /api/auth/register` - 新規ユーザー登録
- `POST /api/auth/login` - ログイン
- `POST /api/auth/logout` - ログアウト
- `GET /api/auth/me` - 現在のユーザー情報取得

### 動画API
- `GET /api/videos` - 動画一覧取得
  - Query: `?page=1&limit=20&category=bouldering&search=keyword`
- `GET /api/videos/:id` - 動画詳細取得
- `POST /api/videos` - 動画投稿（認証必須）
- `POST /api/videos/:id/like` - いいね/いいね解除
- `POST /api/videos/:id/favorite` - お気に入り追加/削除

### ランキングAPI
- `GET /api/rankings/daily` - デイリーランキング
- `GET /api/rankings/weekly` - 週間ランキング
- `GET /api/rankings/monthly` - 月間ランキング
- `GET /api/rankings/yearly` - 年間ランキング
- `GET /api/rankings/total` - 総合ランキング
  - Query: `?limit=20`

### ブログAPI
- `GET /api/blog` - ブログ記事一覧
- `GET /api/blog/:id` - ブログ記事詳細
- `POST /api/blog` - ブログ投稿（認証必須）
- `PUT /api/blog/:id` - ブログ更新（認証必須）
- `DELETE /api/blog/:id` - ブログ削除（認証必須）

## 💻 ローカル開発

### 必要要件
- Node.js 18+
- npm or pnpm
- Cloudflare account (本番デプロイ用)

### セットアップ
```bash
# 依存関係のインストール
npm install

# データベースマイグレーション
npm run db:migrate:local

# シードデータ投入
npm run db:seed

# ビルド
npm run build

# 開発サーバー起動（PM2）
pm2 start ecosystem.config.cjs

# サーバーテスト
npm test
```

### 開発用コマンド
```bash
# ポートクリーンアップ
npm run clean-port

# データベースリセット
npm run db:reset

# ログ確認
pm2 logs webapp --nostream

# サービス再起動
pm2 restart webapp
```

## 🌍 デプロイ

### Cloudflare Pagesへのデプロイ
```bash
# API key setup (required)
# Call setup_cloudflare_api_key tool first

# ビルド
npm run build

# プロダクションデプロイ
npm run deploy:prod

# データベースマイグレーション（本番）
npm run db:migrate:prod
```

## 📦 技術スタック

- **フロントエンド**: Vanilla JavaScript, Tailwind CSS, Font Awesome
- **バックエンド**: Hono (Cloudflare Workers)
- **データベース**: Cloudflare D1 (SQLite)
- **ビルドツール**: Vite
- **デプロイ**: Cloudflare Pages
- **プロセス管理**: PM2
- **HTTP クライアント**: Axios

## 🎯 参考サイト

デザイン参考: https://climbhero.info

以下の要素を模倣：
- ビジュアル重視のワイドレイアウト
- サムネイル中心のカード設計
- 横スクロールカルーセル
- 明確な会員プランCTA
- シンプルな投稿フォーム
- 信頼性を補強するフッター

## 🏢 運営会社

**グッぼる - ボルダリングCafe & Shop**
- 所在地: 滋賀県彦根市
- 営業時間: 10:00-22:00
- Email: info@climbhero.info
- ジム年間利用者: 2.5万人
- クライミングシューズ在庫: 約120モデル
- クライミング歴30年以上の権威により運営

## 📝 ライセンス

MIT License

## 👤 作成者

**由井辰美 (Yui Tatsumi)**
- グッぼる ボルダリングCafe & Shop オーナー
- プロダクトマネージャー / ロッククライマー
- クライミング歴30年以上
- クライミング施設14件の立ち上げ支援実績

---

**最終更新日**: 2025-10-28
**プロジェクト状態**: ✅ 本番稼働中
**参考サイト**: https://climbhero.info

## 🎉 最新アップデート (2025-10-28)

### 📄 静的ページの完全実装
- ✅ **利用規約ページ** (`#terms`): 包括的な法的内容
  - 全11条からなる詳細な利用規約
  - 投稿制限（無料10件/日、プレミアム30件/日）
  - 有料プラン規約（月額・年額）
  - 禁止事項、免責事項
- ✅ **プライバシーポリシー** (`#privacy`): GDPR準拠
  - 収集する情報の明確な説明
  - Cookie利用方針
  - ユーザーの権利（アクセス、訂正、削除）
  - 国際的なデータ転送
  - GDPR対応（EU圏ユーザー向け）
- ✅ **ClimbHeroについて** (`#about`): ミッション・特徴・運営情報
  - AI自動分類システムの説明
  - コンテストシステム
  - パートナージム（全国200箇所以上）
  - コミュニティガイドライン
  - 運営チーム紹介
  - パートナーシップ募集
- ✅ **お問い合わせページ** (`#contact`): 完全なフォーム実装
  - お名前、メールアドレス、件名、内容
  - サポート時間（平日 10:00-18:00）
  - 所在地（〒100-0001 東京都千代田区1-1-1）
  - フォーム送信API (`POST /api/contact`)
  - バリデーション & エラーハンドリング

### 🎨 フッター拡張
- ✅ **4カラムレイアウト**:
  1. **会社情報**: ClimbHero紹介、SNSリンク（Twitter、Facebook、Instagram、YouTube）
  2. **クイックリンク**: ホーム、About、料金プラン、お問い合わせ
  3. **法的情報**: 利用規約、プライバシーポリシー、運営会社、お問い合わせ
  4. **サポート**: サポート時間、所在地、お問い合わせフォームリンク
- ✅ **実際のリンク**: すべてのフッターリンクが機能する静的ページに接続
- ✅ **アイコン強化**: Font Awesomeアイコンで視認性向上

### 🗺️ ルーティングシステム
- ✅ **ハッシュベースルーティング**: `#terms`, `#privacy`, `#about`, `#contact`
- ✅ **統一ヘッダー**: すべての静的ページに共通ナビゲーション
- ✅ **Markdownレンダリング**: Marked.js統合でMarkdownコンテンツを美しく表示
- ✅ **レスポンシブデザイン**: 静的ページもモバイル最適化

### 📚 コンテンツ管理
- ✅ **APIエンドポイント**:
  - `GET /api/pages/terms` - 利用規約
  - `GET /api/pages/privacy` - プライバシーポリシー
  - `GET /api/pages/about` - About
  - `POST /api/contact` - お問い合わせ送信
- ✅ **バージョン管理**: 各ページに最終更新日を表示
- ✅ **SEO最適化**: 適切な見出し階層、メタ情報

### 🎨 スタイル拡張
- ✅ **静的ページ専用CSS**: `.static-page-content`クラス
- ✅ **Markdown対応スタイル**: 見出し、リスト、コード、引用、テーブル
- ✅ **リンク強調**: 紫色（#9333ea）で統一
- ✅ **読みやすさ**: 行間1.8、最適な余白設定

### ランキング表示の大幅改善
- ✅ **カードデザイン統一**: ランキングカードを最新動画と同じスタイルに変更
- ✅ **コンパクト化**: サムネイルサイズを130pxに縮小、情報密度を向上
- ✅ **インタラクティブ性の強化**:
  - ホバー時のサムネイル拡大 (scale 1.1)
  - シマーエフェクト（光の流れるアニメーション）
  - ランキングスコアのオーバーレイ表示
  - トップ3へのパルスグローアニメーション
- ✅ **ランキング変動インジケーター**: 1位👑、急上昇🔥、上昇📈、NEW⭐
- ✅ **スクロール進捗バー**: カルーセルの進行状況を視覚化
- ✅ **エントランスアニメーション**: カードが順次登場するバウンスイン効果
- ✅ **ツールチップ**: 統計バッジにホバーで説明表示
- ✅ **タブボタン統一**: 動画フィルターとランキング期間切り替えのデザイン統一
- ✅ **縦スペース削減**: セクション間隔を最適化し、より多くの情報を表示
